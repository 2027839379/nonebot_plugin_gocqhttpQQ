"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[582],{24138:(e,t,n)=>{n.d(t,{U:()=>w});var i=n(746),o=n(65288),r=n(83247),s=n(22514),a=n(8655),l=n(81524),u=n(49948);class c{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new s.rS(new l.e(1,1,1,1),0,0,new a.L(1,1),0),new s.rS(new l.e(1,1,1,1),0,0,new a.L(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new s.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?u.Y.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):u.Y.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),u=this._validatePositionWithCache(e,o,i,a);return n.equals(r)&&i.equals(a)&&o.equals(u)?t:new s.rS(l.e.fromPositions(a,u),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=c._validateViewState(e.viewModel,n)),t){const n=e.model.validateRange(t.selectionStart),i=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),r=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new s.rS(n,t.selectionStartKind,i,o,r)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new s.rS(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new s.rS(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new a.L(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new a.L(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new l.e(i.lineNumber,i.column,o.lineNumber,o.column),u=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new s.rS(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,u,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class h{constructor(e){this.context=e,this.cursors=[new c(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((e=>e.readSelectionFromMarkers(this.context)))}getAll(){return this.cursors.map((e=>e.asCursorState()))}getViewPositions(){return this.cursors.map((e=>e.viewState.position))}getTopMostViewPosition(){return(0,r.VJ)(this.cursors,(0,r.tT)((e=>e.viewState.position),a.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,r.jV)(this.cursors,(0,r.tT)((e=>e.viewState.position),a.L.compare)).viewState.position}getSelections(){return this.cursors.map((e=>e.modelState.selection))}getViewSelections(){return this.cursors.map((e=>e.viewState.selection))}setSelections(e){this.setStates(s.Vi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const e=n-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>n){const e=t-n;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new c(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((0,r.tT)((e=>e.selection),l.e.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1],r=i.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(l=a.isEmpty()||r.isEmpty()?a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):a.getStartPosition().isBefore(r.getEndPosition()),l){const r=i.index<o.index?n:n+1,a=i.index<o.index?n+1:n,l=t[a].index,c=t[r].index,h=t[a].selection,d=t[r].selection;if(!h.equalsSelection(d)){const n=h.plusRange(d),i=h.selectionStartLineNumber===h.startLineNumber&&h.selectionStartColumn===h.startColumn,o=d.selectionStartLineNumber===d.startLineNumber&&d.selectionStartColumn===d.startColumn;let a,m;l===this.lastAddedCursorIndex?(a=i,this.lastAddedCursorIndex=c):a=o,m=a?new u.Y(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new u.Y(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn),t[r].selection=m;const g=s.Vi.fromModelSelection(m);e[c].setState(this.context,g.modelState,g.viewState)}for(const e of t)e.index>l&&e.index--;e.splice(l,1),t.splice(a,1),this._removeSecondaryCursor(l-1),n--}}}}class d{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}var m=n(49515),g=n(84727),f=n(43277),C=n(70384),p=n(52644),S=n(86481);class w extends p.JT{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new d(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new h(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,p.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new d(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;null!==i&&i.length>r&&(i=i.slice(0,r),o=!0);const s=L.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,o,r){const s=this._cursors.getViewPositions();let a=null,u=null;s.length>1?u=this._cursors.getViewSelections():a=l.e.fromPositions(s[0],s[0]),e.emitViewEvent(new C.Qb(t,n,a,u,i,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push({inSelectionMode:!i.isEmpty(),selectionStart:{lineNumber:i.selectionStartLineNumber,column:i.selectionStartColumn},position:{lineNumber:i.positionLineNumber,column:i.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const e=t[i];let o=1,r=1;e.position&&e.position.lineNumber&&(o=e.position.lineNumber),e.position&&e.position.column&&(r=e.position.column);let s=o,a=r;e.selectionStart&&e.selectionStart.lineNumber&&(s=e.selectionStart.lineNumber),e.selectionStart&&e.selectionStart.column&&(a=e.selectionStart.column),n.push({selectionStartLineNumber:s,selectionStartColumn:a,positionLineNumber:o,positionColumn:r})}this.setStates(e,"restoreState",0,s.Vi.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof f.D8){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new h(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const t=s.Vi.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,t)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,s.Vi.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,s.Vi.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let s=0,a=e.length;s<a;s++)n.push({range:e[s],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[s],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new v(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=b.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let t=0;t<e.commands.length;t++){const o=e.commands[t];o instanceof g.g_&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),i.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){const r=L.from(this._model,this);if(r.equals(i))return!1;const s=this._cursors.getSelections(),a=this._cursors.getViewSelections();if(e.emitViewEvent(new C.e$(a,s,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some(((e,t)=>!e.modelState.equals(i.cursorState[t].modelState)))){const a=i?i.cursorState.map((e=>e.modelState.selection)):null,l=i?i.modelVersionId:0;e.emitOutgoingEvent(new S.H6(a,s,l,r.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.text||i.text.indexOf("\n")>=0)return null;const o=i.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const r=o[1],s=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(r);if(!s||1!==s.length)return null;const a=s[0].open,l=i.text.length-o[2].length-1,u=i.text.lastIndexOf(a,l-1);if(-1===u)return null;t.push([u,l])}return t}executeEdits(e,t,n,i){let o=null;"snippet"===t&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);const r=[],s=[],a=this._model.pushEditOperations(this.getSelections(),n,(e=>{if(o)for(let n=0,i=o.length;n<i;n++){const[t,i]=o[n],a=e[n],u=a.range.startLineNumber,c=a.range.startColumn-1+t,h=a.range.startColumn-1+i;r.push(new l.e(u,h+1,u,h+2)),s.push(new l.e(u,c+1,u,h+2))}const t=i(e);return t&&(this._isHandling=!0),t}));a&&(this._isHandling=!1,this.setSelections(e,t,a,0)),r.length>0&&this._pushAutoClosedAction(r,s)}_executeEdit(e,t,n,o=0){if(this.context.cursorConfig.readOnly)return;const r=L.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){(0,i.dL)(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,o,r,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return v.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new _(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((()=>{"keyboard"===t&&this._executeEditOperation(g.u6.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))}),e,t)}type(e,t,n){this._executeEdit((()=>{if("keyboard"===n){const e=t.length;let n=0;while(n<e){const e=o.vH(t,n),i=t.substr(n,e);this._executeEditOperation(g.u6.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),i)),n+=e}}else this._executeEditOperation(g.u6.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))}),e,n)}compositionType(e,t,n,i,o,r){if(0!==t.length||0!==n||0!==i)this._executeEdit((()=>{this._executeEditOperation(g.u6.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))}),e,r);else if(0!==o){const t=this.getSelections().map((e=>{const t=e.getPosition();return new u.Y(t.lineNumber,t.column+o,t.lineNumber,t.column+o)}));this.setSelections(e,r,t,0)}}paste(e,t,n,i,o){this._executeEdit((()=>{this._executeEditOperation(g.u6.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))}),e,o,4)}cut(e,t){this._executeEdit((()=>{this._executeEditOperation(m.A.cut(this.context.cursorConfig,this._model,this.getSelections()))}),e,t)}executeCommand(e,t,n){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new s.Tp(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}executeCommands(e,t,n){this._executeEdit((()=>{this._executeEditOperation(new s.Tp(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}}class L{static from(e,t){return new L(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class v{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const e=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(e&&(t.push(e),e.startLineNumber!==e.endLineNumber))return!1}t.sort(l.e.compareRangesUsingStarts),e.sort(l.e.compareRangesUsingStarts);for(let n=0;n<e.length;n++){if(n>=t.length)return!1;if(!t[n].strictContainsRange(e[n]))return!1}return!0}}class b{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let r=0,s=i.trackedRanges.length;r<s;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(0===n.operations.length)return null;const i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let l=0,u=i.length;l<u;l++)o.hasOwnProperty(i[l].identifier.major.toString())||r.push(i[l]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let s=e.model.pushEditOperations(e.selectionsBefore,r,(n=>{const i=[];for(let t=0;t<e.selectionsBefore.length;t++)i[t]=[];for(const e of n)e.identifier&&i[e.identifier.major].push(e);const o=(e,t)=>e.identifier.minor-t.identifier.minor,r=[];for(let s=0;s<e.selectionsBefore.length;s++)i[s].length>0?(i[s].sort(o),r[s]=t[s].computeCursorState(e.model,{getInverseEditOperations:()=>i[s],getTrackedSelection:t=>{const n=parseInt(t,10),i=e.model._getTrackedRange(e.trackedRanges[n]);return 0===e.trackedRangesDirection[n]?new u.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new u.Y(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}})):r[s]=e.selectionsBefore[s];return r}));s||(s=e.selectionsBefore);const a=[];for(const l in o)o.hasOwnProperty(l)&&a.push(parseInt(l,10));a.sort(((e,t)=>t-e));for(const l of a)s.splice(l,1);return s}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,r=t.length;o<r;o++){const r=t[o];if(r){const t=this._getEditOperationsFromCommand(e,o,r);n=n.concat(t.operations),i=i||t.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const o=[];let r=0;const s=(e,i,s=!1)=>{l.e.isEmpty(e)&&""===i||o.push({identifier:{major:t,minor:r++},range:e,text:i,forceMoveMarkers:s,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const c=(e,t,n)=>{a=!0,s(e,t,n)},h=(t,n)=>{const i=u.Y.liftSelection(t);let o;if(i.isEmpty())if("boolean"===typeof n)o=n?2:3;else{const t=e.model.getLineMaxColumn(i.startLineNumber);o=i.startColumn===t?2:3}else o=1;const r=e.trackedRanges.length,s=e.model._setTrackedRange(null,i,o);return e.trackedRanges[r]=s,e.trackedRangesDirection[r]=i.getDirection(),r.toString()},d={addEditOperation:s,addTrackedEditOperation:c,trackSelection:h};try{n.getEditOperations(e.model,d)}catch(m){return(0,i.dL)(m),{operations:[],hadTrackedEditOperation:!1}}return{operations:o,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort(((e,t)=>-l.e.compareRangesUsingEnds(e.range,t.range)));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(l.e.getStartPosition(i.range).isBefore(l.e.getEndPosition(o.range))){let r;r=i.identifier.major>o.identifier.major?i.identifier.major:o.identifier.major,t[r.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===r&&(e.splice(t,1),t<n&&n--,t--);n>0&&n--}}return t}}class N{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class _{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new N(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=_._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=_._capture(e,t);if(!n)return null;if(this._original.length!==n.length)return null;const i=[];for(let o=0,r=this._original.length;o<r;o++)i.push(_._deduceOutcome(this._original[o],n[o]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,o.Mh(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,o.P1(e.text,t.text)),r=e.text.substring(n,e.text.length-i),s=t.text.substring(n,t.text.length-i);return new g.Nu(r,e.startSelection-n,e.endSelection-n,s,t.startSelection-n,t.endSelection-n)}}},92451:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(10824);class o{static whitespaceVisibleColumn(e,t,n){const o=e.length;let r=0,s=-1,a=-1;for(let l=0;l<o;l++){if(l===t)return[s,a,r];r%n===0&&(s=l,a=r);const o=e.charCodeAt(l);switch(o){case 32:r+=1;break;case 9:r=i.i.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===o?[s,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const s=e.length,[a,l,u]=o.whitespaceVisibleColumn(e,t,n);if(-1===u)return-1;let c;switch(r){case 0:c=!0;break;case 1:c=!1;break;case 2:if(u%n===0)return t;c=u%n<=n/2;break}if(c){if(-1===a)return-1;let t=l;for(let o=a;o<s;++o){if(t===l+n)return a;const r=e.charCodeAt(o);switch(r){case 32:t+=1;break;case 9:t=i.i.nextRenderTabStop(t,n);break;default:return-1}}return t===l+n?a:-1}const h=i.i.nextRenderTabStop(u,n);let d=u;for(let o=t;o<s;o++){if(d===h)return o;const t=e.charCodeAt(o);switch(t){case 32:d+=1;break;case 9:d=i.i.nextRenderTabStop(d,n);break;default:return-1}}return d===h?s:-1}}},23334:(e,t,n)=>{n.d(t,{U:()=>s});var i=n(22514),o=n(8655),r=n(81524);class s{static columnSelect(e,t,n,s,a,l){const u=Math.abs(a-n)+1,c=n>a,h=s>l,d=s<l,m=[];for(let g=0;g<u;g++){const a=n+(c?-g:g),u=e.columnFromVisibleColumn(t,a,s),f=e.columnFromVisibleColumn(t,a,l),C=e.visibleColumnFromColumn(t,new o.L(a,u)),p=e.visibleColumnFromColumn(t,new o.L(a,f));if(d){if(C>l)continue;if(p<s)continue}if(h){if(p>s)continue;if(C<l)continue}m.push(new i.rS(new r.e(a,u,a,u),0,0,new o.L(a,f),0))}if(0===m.length)for(let g=0;g<u;g++){const e=n+(c?-g:g),s=t.getLineMaxColumn(e);m.push(new i.rS(new r.e(e,s,e,s),0,0,new o.L(e,s),0))}return{viewStates:m,reversed:c,fromLineNumber:n,fromVisualColumn:s,toLineNumber:a,toVisualColumn:l}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,s.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=s;l++){const n=t.getLineMaxColumn(l),r=e.visibleColumnFromColumn(t,new o.L(l,n));i=Math.max(i,r)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const o=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const o=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}},49515:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(65288),o=n(74307),r=n(22514),s=n(10824),a=n(68764),l=n(81524),u=n(8655);class c{static deleteRight(e,t,n,i){const r=[];let s=3!==e;for(let u=0,c=i.length;u<c;u++){const e=i[u];let c=e;if(c.isEmpty()){const i=e.getPosition(),o=a.o.right(t,n,i);c=new l.e(o.lineNumber,o.column,i.lineNumber,i.column)}c.isEmpty()?r[u]=null:(c.startLineNumber!==c.endLineNumber&&(s=!0),r[u]=new o.T4(c,""))}return[s,r]}static isAutoClosingPairDelete(e,t,n,i,o,s,a){if("never"===t&&"never"===n)return!1;if("never"===e)return!1;for(let l=0,u=s.length;l<u;l++){const u=s[l],c=u.getPosition();if(!u.isEmpty())return!1;const h=o.getLineContent(c.lineNumber);if(c.column<2||c.column>=h.length+1)return!1;const d=h.charAt(c.column-2),m=i.get(d);if(!m)return!1;if((0,r.LN)(d)){if("never"===n)return!1}else if("never"===t)return!1;const g=h.charAt(c.column-1);let f=!1;for(const e of m)e.open===d&&e.close===g&&(f=!0);if(!f)return!1;if("auto"===e){let e=!1;for(let t=0,n=a.length;t<n;t++){const n=a[t];if(c.lineNumber===n.startLineNumber&&c.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let r=0,s=n.length;r<s;r++){const e=n[r].getPosition(),t=new l.e(e.lineNumber,e.column-1,e.lineNumber,e.column+1);i[r]=new o.T4(t,"")}return[!0,i]}static deleteLeft(e,t,n,i,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,r))return this._runAutoClosingPairDelete(t,n,i);const s=[];let a=2!==e;for(let l=0,u=i.length;l<u;l++){const e=c.getDeleteRange(i[l],n,t);e.isEmpty()?s[l]=null:(e.startLineNumber!==e.endLineNumber&&(a=!0),s[l]=new o.T4(e,""))}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const o=e.getPosition();if(n.useTabStops&&o.column>1){const e=t.getLineContent(o.lineNumber),r=i.LC(e),a=-1===r?e.length+1:r+1;if(o.column<=a){const e=n.visibleColumnFromColumn(t,o),i=s.i.prevIndentTabStop(e,n.indentSize),r=n.columnFromVisibleColumn(t,o.lineNumber,i);return new l.e(o.lineNumber,r,o.lineNumber,o.column)}}return l.e.fromPositions(c.getPositionAfterDeleteLeft(o,t),o)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=i.oH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}if(e.lineNumber>1){const n=e.lineNumber-1;return new u.L(n,t.getLineMaxColumn(n))}return e}static cut(e,t,n){const i=[];let s=null;n.sort(((e,t)=>u.L.compare(e.getStartPosition(),t.getEndPosition())));for(let r=0,a=n.length;r<a;r++){const a=n[r];if(a.isEmpty())if(e.emptySelectionClipboard){const e=a.getPosition();let n,u,c,h;e.lineNumber<t.getLineCount()?(n=e.lineNumber,u=1,c=e.lineNumber+1,h=1):e.lineNumber>1&&(null===s||void 0===s?void 0:s.endLineNumber)!==e.lineNumber?(n=e.lineNumber-1,u=t.getLineMaxColumn(e.lineNumber-1),c=e.lineNumber,h=t.getLineMaxColumn(e.lineNumber)):(n=e.lineNumber,u=1,c=e.lineNumber,h=t.getLineMaxColumn(e.lineNumber));const d=new l.e(n,u,c,h);s=d,d.isEmpty()?i[r]=null:i[r]=new o.T4(d,"")}else i[r]=null;else i[r]=new o.T4(a,"")}return new r.Tp(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},17321:(e,t,n)=>{n.d(t,{N:()=>i,P:()=>c});var i,o=n(39812),r=n(22514),s=n(68764),a=n(55017),l=n(8655),u=n(81524);class c{static addCursorDown(e,t,n){const i=[];let o=0;for(let a=0,l=t.length;a<l;a++){const l=t[a];i[o++]=new r.Vi(l.modelState,l.viewState),i[o++]=n?r.Vi.fromModelState(s.o.translateDown(e.cursorConfig,e.model,l.modelState)):r.Vi.fromViewState(s.o.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let o=0;for(let a=0,l=t.length;a<l;a++){const l=t[a];i[o++]=new r.Vi(l.modelState,l.viewState),i[o++]=n?r.Vi.fromModelState(s.o.translateUp(e.cursorConfig,e.model,l.modelState)):r.Vi.fromViewState(s.o.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o];i[o]=this._moveToLineStart(e,r,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,o=t.modelState.position.column,r=i===o,s=t.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(s),l=i===a;return r||l?this._moveToLineStartByModel(e,t,n):this._moveToLineStartByView(e,t,n)}static _moveToLineStartByView(e,t,n){return r.Vi.fromViewState(s.o.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return r.Vi.fromModelState(s.o.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const o=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];o[r]=this._moveToLineEnd(e,s,n,i)}return o}static _moveToLineEnd(e,t,n,i){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),s=o.column===r,a=t.modelState.position,l=e.model.getLineMaxColumn(a.lineNumber),u=r-o.column===l-a.column;return s||u?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return r.Vi.fromViewState(s.o.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return r.Vi.fromModelState(s.o.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.modelState.selection.startLineNumber,a=e.model.getLineCount();let c,h=o.modelState.selection.endLineNumber;h===a?c=e.model.getLineMaxColumn(a):(h++,c=1),n[i]=r.Vi.fromModelState(new r.rS(new u.e(s,1,s,1),0,0,new l.L(h,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let o=0,a=t.length;o<a;o++){const a=t[o];i[o]=r.Vi.fromModelState(s.o.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let o=0,a=t.length;o<a;o++){const a=t[o];i[o]=r.Vi.fromModelState(s.o.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return r.Vi.fromModelState(new r.rS(new u.e(1,1,1,1),0,0,new l.L(n,i),0))}static line(e,t,n,i,o){const s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new l.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n){const t=e.model.getLineCount();let n=s.lineNumber+1,i=1;return n>t&&(n=t,i=e.model.getLineMaxColumn(n)),r.Vi.fromModelState(new r.rS(new u.e(s.lineNumber,1,n,i),2,0,new l.L(n,i),0))}const c=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<c)return r.Vi.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(s.lineNumber>c){const n=e.getLineCount();let i=a.lineNumber+1,o=1;return i>n&&(i=n,o=e.getLineMaxColumn(i)),r.Vi.fromViewState(t.viewState.move(!0,i,o,0))}{const e=t.modelState.selectionStart.getEndPosition();return r.Vi.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,n,i){const o=e.model.validatePosition(i);return r.Vi.fromModelState(a.w.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new r.Vi(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return r.Vi.fromViewState(new r.rS(new u.e(n,i,n,i),0,0,new l.L(n,i),0))}static moveTo(e,t,n,i,o){if(n){if(1===t.modelState.selectionStartKind)return this.word(e,t,n,i);if(2===t.modelState.selectionStartKind)return this.line(e,t,n,i,o)}const s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new l.L(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return r.Vi.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,o,a){switch(n){case 0:return 4===a?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return 4===a?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return 2===a?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return 2===a?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return 2===a?t.map((t=>r.Vi.fromViewState(s.o.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,i)))):t.map((t=>r.Vi.fromModelState(s.o.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,i))));case 5:return 2===a?t.map((t=>r.Vi.fromViewState(s.o.moveToNextBlankLine(e.cursorConfig,e,t.viewState,i)))):t.map((t=>r.Vi.fromModelState(s.o.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,i))));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){const r=e.getCompletelyVisibleViewRange(),s=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const n=this._firstLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 13:{const n=this._lastLineNumberInRange(e.model,s,o),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 12:{const n=Math.round((s.startLineNumber+s.endLineNumber)/2),o=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,o)]}case 14:{const n=[];for(let o=0,s=t.length;o<s;o++){const s=t[o];n[o]=this.findPositionInViewportIfOutside(e,s,r,i)}return n}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new r.Vi(t.modelState,t.viewState);{let a;a=o>n.endLineNumber-1?n.endLineNumber-1:o<n.startLineNumber?n.startLineNumber:o;const l=s.o.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,a,!1);return r.Vi.fromViewState(t.viewState.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map((t=>r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,t.viewState,n,i))))}static _moveHalfLineLeft(e,t,n){const i=[];for(let o=0,a=t.length;o<a;o++){const a=t[o],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[o]=r.Vi.fromViewState(s.o.moveLeft(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveRight(e,t,n,i){return t.map((t=>r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,t.viewState,n,i))))}static _moveHalfLineRight(e,t,n){const i=[];for(let o=0,a=t.length;o<a;o++){const a=t[o],l=a.viewState.position.lineNumber,u=Math.round(e.getLineContent(l).length/2);i[o]=r.Vi.fromViewState(s.o.moveRight(e.cursorConfig,e,a.viewState,n,u))}return i}static _moveDownByViewLines(e,t,n,i){const o=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];o[a]=r.Vi.fromViewState(s.o.moveDown(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){const o=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];o[a]=r.Vi.fromModelState(s.o.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){const o=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];o[a]=r.Vi.fromViewState(s.o.moveUp(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){const o=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];o[a]=r.Vi.fromModelState(s.o.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return r.Vi.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return r.Vi.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,a=e.getLineMinColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,a)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,a)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,a=Math.round((e.getLineMaxColumn(s)+e.getLineMinColumn(s))/2);i[o]=this._moveToViewPosition(e,r,n,s,a)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,a=e.getLineMaxColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,a)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=r.viewState.position.lineNumber,a=e.getLineLastNonWhitespaceColumn(s);i[o]=this._moveToViewPosition(e,r,n,s,a)}return i}}(function(e){const t=function(e){if(!o.Kn(e))return!1;const t=e;return!!o.HD(t.to)&&(!(!o.o8(t.select)&&!o.jn(t.select))&&(!(!o.o8(t.by)&&!o.HD(t.by))&&!(!o.o8(t.value)&&!o.hj(t.value))))};function n(t){if(!t.to)return null;let n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let i=0;switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Character:i=3;break;case e.RawUnit.HalfLine:i=4;break}return{direction:n,unit:i,select:!!t.select,value:t.value||1}}e.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:t,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=n})(i||(i={}))},68764:(e,t,n)=>{n.d(t,{o:()=>c});var i=n(65288),o=n(10824),r=n(8655),s=n(81524),a=n(92451),l=n(22514);class u{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class c{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-i.HO(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new r.L(n,e.getLineMaxColumn(n))}return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=a.l.atomicPosition(o,t.column-1,n,0);if(-1!==s&&s+1>=i)return new r.L(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?c.leftPositionAtomicSoftTabs(t,n,e.tabSize):c.leftPosition(t,n);return new u(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let r,s;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,s=n.selection.startColumn;else{const i=n.position.delta(void 0,-(o-1)),a=t.normalizePosition(c.clipPositionColumn(i,t),0),l=c.left(e,t,a);r=l.lineNumber,s=l.column}return n.move(i,r,s,0)}static clipPositionColumn(e,t){return new r.L(e.lineNumber,c.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n+=i.vH(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new r.L(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),s=a.l.atomicPosition(o,n-1,i,1);if(-1!==s)return new r.L(t,s+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?c.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):c.rightPosition(t,n.lineNumber,n.column);return new u(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let r,s;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,s=n.selection.endColumn;else{const i=n.position.delta(void 0,o-1),a=t.normalizePosition(c.clipPositionColumn(i,t),1),l=c.right(e,t,a);r=l.lineNumber,s=l.column}return n.move(i,r,s,0)}static vertical(e,t,n,i,s,a,l,c){const h=o.i.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,d=t.getLineCount(),m=1===n&&1===i,g=n===d&&i===t.getLineMaxColumn(n),f=a<n?m:g;if(n=a,n<1?(n=1,i=l?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,i=l?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,h),s=f?0:h-o.i.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),void 0!==c){const e=new r.L(n,i),o=t.normalizePosition(e,c);s+=i-o.column,n=o.lineNumber,i=o.column}return new u(n,i,s)}static down(e,t,n,i,o,r,s){return this.vertical(e,t,n,i,o,n+r,s,4)}static moveDown(e,t,n,i,o){let s,a;n.hasSelection()&&!i?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let l,u=0;do{l=c.down(e,t,s+u,a,n.leftoverVisibleColumns,o,!0);const i=t.normalizePosition(new r.L(l.lineNumber,l.column),2);if(i.lineNumber>s)break}while(u++<10&&s+u<t.getLineCount());return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,o=c.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),a=c.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new l.rS(new s.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static up(e,t,n,i,o,r,s){return this.vertical(e,t,n,i,o,n-r,s,3)}static moveUp(e,t,n,i,o){let r,s;n.hasSelection()&&!i?(r=n.selection.startLineNumber,s=n.selection.startColumn):(r=n.position.lineNumber,s=n.position.column);const a=c.up(e,t,r,s,n.leftoverVisibleColumns,o,!0);return n.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,o=c.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),a=c.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new l.rS(new s.e(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new r.L(a.lineNumber,a.column),a.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;while(o>1&&this._isBlankLine(t,o))o--;while(o>1&&!this._isBlankLine(t,o))o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){const o=t.getLineCount();let r=n.position.lineNumber;while(r<o&&this._isBlankLine(t,r))r++;while(r<o&&!this._isBlankLine(t,r))r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const o=n.position.lineNumber,r=t.getLineMinColumn(o),s=t.getLineFirstNonWhitespaceColumn(o)||r;let a;const l=n.position.column;return a=l===s?r:s,n.move(i,o,a,0)}static moveToEndOfLine(e,t,n,i,o){const r=n.position.lineNumber,s=t.getLineMaxColumn(r);return n.move(i,r,s,o?1073741824-s:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return n.move(i,o,r,0)}}},84727:(e,t,n)=>{n.d(t,{Nu:()=>w,g_:()=>S,u6:()=>p});var i=n(746),o=n(65288),r=n(74307),s=n(76725),a=n(6556),l=n(22514),u=n(92189),c=n(81524),h=n(8655),d=n(72609),m=n(28010),g=n(49465),f=n(96885),C=n(31854);class p{static indent(e,t,n){if(null===t||null===n)return[];const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new s.U(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new s.U(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,s.U.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,s.U.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const o=[];for(let s=0,a=n.length;s<a;s++)o[s]=new r.T4(n[s],i[s]);return new l.Tp(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){const s=[];for(let a=0,l=n.length;a<l;a++){const e=n[a],t=e.getPosition();if(o&&!e.isEmpty()&&(o=!1),o&&i.indexOf("\n")!==i.length-1&&(o=!1),o){const n=new c.e(t.lineNumber,1,t.lineNumber,1);s[a]=new r.hP(n,i,e,!0)}else s[a]=new r.T4(e,i)}return new l.Tp(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,r){if(i)return null;if(1===t.length)return null;if(r&&r.length===t.length)return r;if("spread"===e.multiCursorPaste){10===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1)),13===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1));const e=o.uq(n);if(e.length===t.length)return e}return null}static paste(e,t,n,i,o,r){const s=this._distributePasteToCursors(e,n,i,o,r);return s?(n=n.sort(c.e.compareRangesUsingStarts),this._distributedPaste(e,t,n,s)):this._simplePaste(e,t,n,i,o)}static _goodIndentForLine(e,t,n){let i=null,r="";const s=(0,f.r7)(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)i=s.action,r=s.indentation;else if(n>1){let i;for(i=n-1;i>=1;i--){const e=t.getLineContent(i),n=o.ow(e);if(n>=0)break}if(i<1)return null;const s=t.getLineMaxColumn(i),a=(0,C.A)(e.autoIndent,t,new c.e(i,s,i,s),e.languageConfigurationService);a&&(r=a.indentation+a.appendText)}return i&&(i===d.wU.Indent&&(r=p.shiftIndent(e,r)),i===d.wU.Outdent&&(r=p.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,i){let o="";const s=n.getStartPosition();if(e.insertSpaces){const n=e.visibleColumnFromColumn(t,s),i=e.indentSize,r=i-n%i;for(let e=0;e<r;e++)o+=" "}else o="\t";return new r.T4(n,o,i)}static tab(e,t,n){const i=[];for(let o=0,a=n.length;o<a;o++){const a=n[o];if(a.isEmpty()){const n=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(n)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let s=this._goodIndentForLine(e,t,a.startLineNumber);s=s||"\t";const l=e.normalizeIndentation(s);if(!n.startsWith(l)){i[o]=new r.T4(new c.e(a.startLineNumber,1,a.startLineNumber,n.length+1),l,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const n=t.getLineMaxColumn(a.startLineNumber);if(1!==a.startColumn||a.endColumn!==n){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new s.U(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,o,r,s,a){const u=i.map((e=>this._compositionType(n,e,o,r,s,a)));return new l.Tp(4,u,{shouldPushStackElementBefore:v(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,s){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),u=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),h=new c.e(a.lineNumber,l,a.lineNumber,u),d=e.getValueInRange(h);return d===n&&0===s?null:new r.Uo(h,n,0,s)}static _typeCommand(e,t,n){return n?new r.Sj(e,t,!0):new r.T4(e,t,!0)}static _enter(e,t,n,i){if(0===e.autoIndent)return p._typeCommand(i,"\n",n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||1===e.autoIndent){const r=t.getLineContent(i.startLineNumber),s=o.V8(r).substring(0,i.startColumn-1);return p._typeCommand(i,"\n"+e.normalizeIndentation(s),n)}const s=(0,C.A)(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===d.wU.None)return p._typeCommand(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===d.wU.Indent)return p._typeCommand(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===d.wU.IndentOutdent){const t=e.normalizeIndentation(s.indentation),o=e.normalizeIndentation(s.indentation+s.appendText),a="\n"+o+"\n"+t;return n?new r.Sj(i,a,!0):new r.Uo(i,a,-1,o.length-t.length,!0)}if(s.indentAction===d.wU.Outdent){const t=p.unshiftIndent(e,s.indentation);return p._typeCommand(i,"\n"+e.normalizeIndentation(t+s.appendText),n)}}const a=t.getLineContent(i.startLineNumber),l=o.V8(a).substring(0,i.startColumn-1);if(e.autoIndent>=4){const s=(0,f.UF)(e.autoIndent,t,i,{unshiftIndent:t=>p.unshiftIndent(e,t),shiftIndent:t=>p.shiftIndent(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let a=e.visibleColumnFromColumn(t,i.getEndPosition());const l=i.endColumn,u=t.getLineContent(i.endLineNumber),c=o.LC(u);if(i=c>=0?i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,c+1)):i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new r.Sj(i,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return l<=c+1&&(e.insertSpaces||(a=Math.ceil(a/e.indentSize)),t=Math.min(a+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new r.Uo(i,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return p._typeCommand(i,"\n"+e.normalizeIndentation(l),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,o=n.length;i<o;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const o=(0,m.u0)(t,n.startLineNumber,n.startColumn),r=(0,f.$9)(e.autoIndent,t,n,i,{shiftIndent:t=>p.shiftIndent(e,t),unshiftIndent:t=>p.unshiftIndent(e,t)},e.languageConfigurationService);if(null===r)return null;if(r!==e.normalizeIndentation(o)){const o=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return 0===o?p._typeCommand(new c.e(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):p._typeCommand(new c.e(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(o-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,o){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,s=n.length;r<s;r++){const s=n[r];if(!s.isEmpty())return!1;const a=s.getPosition(),u=t.getLineContent(a.lineNumber),c=u.charAt(a.column-1);if(c!==o)return!1;const h=(0,l.LN)(o),d=a.column>2?u.charCodeAt(a.column-2):0;if(92===d&&h)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,n=i.length;t<n;t++){const n=i[t];if(a.lineNumber===n.startLineNumber&&a.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,o){const s=[];for(let a=0,l=i.length;a<l;a++){const e=i[a],t=e.getPosition(),n=new c.e(t.lineNumber,t.column,t.lineNumber,t.column+1);s[a]=new r.T4(n,o)}return new l.Tp(4,s,{shouldPushStackElementBefore:v(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some((e=>t.startsWith(e.open))),s=o.some((e=>t.startsWith(e.close)));return!r&&s}static _findAutoClosingPairOpen(e,t,n,i){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let r=null;for(const s of o)if(null===r||s.open.length>r.open.length){let e=!0;for(const o of n){const n=t.getValueInRange(new c.e(o.lineNumber,o.column-s.open.length+1,o.lineNumber,o.column));if(n+i!==s.open){e=!1;break}}e&&(r=s)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _getAutoClosingPairClose(e,t,n,i,o){const r=(0,l.LN)(i),s=r?e.autoClosingQuotes:e.autoClosingBrackets,a=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if("never"===s)return null;for(const l of n)if(!l.isEmpty())return null;const c=n.map((e=>{const t=e.getPosition();return o?{lineNumber:t.lineNumber,beforeColumn:t.column-i.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}})),d=this._findAutoClosingPairOpen(e,t,c.map((e=>new h.L(e.lineNumber,e.beforeColumn))),i);if(!d)return null;const m=this._findContainedAutoClosingPair(e,d),f=m?m.close:"";let C=!0;for(const l of c){const{lineNumber:n,beforeColumn:o,afterColumn:r}=l,c=t.getLineContent(n),h=c.substring(0,o-1),m=c.substring(r-1);if(m.startsWith(f)||(C=!1),m.length>0){const t=m.charAt(0),n=p._isBeforeClosingBrace(e,m);if(!n&&!a(t))return null}if(1===d.open.length&&("'"===i||'"'===i)&&"always"!==s){const t=(0,u.u)(e.wordSeparators);if(h.length>0){const e=h.charCodeAt(h.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(n))return null;t.tokenization.forceTokenization(n);const S=t.tokenization.getLineTokens(n),w=(0,g.wH)(S,o-1);if(!d.shouldAutoClose(w,o-w.firstCharOffset))return null;const L=d.findNeutralCharacter();if(L){const e=t.tokenization.getTokenTypeIfInsertingCharacter(n,o,L);if(!d.isOK(e))return null}}return C?d.close.substring(0,d.close.length-f.length):d.close}static _runAutoClosingOpenCharType(e,t,n,i,o,r,s){const a=[];for(let l=0,u=i.length;l<u;l++){const e=i[l];a[l]=new S(e,o,!r,s)}return new l.Tp(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return(0,l.LN)(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,t,n,i){if(!p._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const o=(0,l.LN)(i);for(const r of n){if(r.isEmpty())return!1;let e=!0;for(let n=r.startLineNumber;n<=r.endLineNumber;n++){const i=t.getLineContent(n),o=n===r.startLineNumber?r.startColumn-1:0,s=n===r.endLineNumber?r.endColumn-1:i.length,a=i.substring(o,s);if(/[^ \t]/.test(a)){e=!1;break}}if(e)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const e=t.getValueInRange(r);if((0,l.LN)(e))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,o){const r=[];for(let s=0,l=i.length;s<l;s++){const e=i[s],n=t.surroundingPairs[o];r[s]=new a.F(e,o,n)}return new l.Tp(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!(1!==n.length||!t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,a){if(!t.electricChars.hasOwnProperty(a)||!s.isEmpty())return null;const u=s.getPosition();n.tokenization.forceTokenization(u.lineNumber);const h=n.tokenization.getLineTokens(u.lineNumber);let d;try{d=t.onElectricCharacter(a,h,u.column)}catch(m){return(0,i.dL)(m),null}if(!d)return null;if(d.matchOpenBracket){const i=(h.getLineContent()+a).lastIndexOf(d.matchOpenBracket)+1,s=n.bracketPairs.findMatchingBracketUp(d.matchOpenBracket,{lineNumber:u.lineNumber,column:i},500);if(s){if(s.startLineNumber===u.lineNumber)return null;const i=n.getLineContent(s.startLineNumber),h=o.V8(i),d=t.normalizeIndentation(h),m=n.getLineContent(u.lineNumber),g=n.getLineFirstNonWhitespaceColumn(u.lineNumber)||u.column,f=m.substring(g-1,u.column-1),C=d+f+a,p=new c.e(u.lineNumber,1,u.lineNumber,u.column),S=new r.T4(p,C);return new l.Tp(L(C,e),[S],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,o,s){if(!i)return null;let u=null;for(const r of i)if(null===u)u=r.insertedText;else if(u!==r.insertedText)return null;if(!u||1!==u.length)return null;const h=u;let d=!1;for(const r of i)if(0!==r.deletedText.length){d=!0;break}if(d){if(!p._shouldSurroundChar(t,h)||!t.surroundingPairs.hasOwnProperty(h))return null;const e=(0,l.LN)(h);for(const t of i){if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length)return null;if(/^[ \t]+$/.test(t.deletedText))return null;if(e&&(0,l.LN)(t.deletedText))return null}const n=[];for(const t of o){if(!t.isEmpty())return null;n.push(t.getPosition())}if(n.length!==i.length)return null;const r=[];for(let o=0,s=n.length;o<s;o++)r.push(new a.K(n[o],i[o].deletedText,t.surroundingPairs[h]));return new l.Tp(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,o,s,h)){const e=o.map((e=>new r.T4(new c.e(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new l.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const m=this._getAutoClosingPairClose(t,n,o,h,!0);return null!==m?this._runAutoClosingOpenCharType(e,t,n,o,h,!0,m):null}static typeWithInterceptors(e,t,n,i,o,s,a){if(!e&&"\n"===a){const e=[];for(let t=0,r=o.length;t<r;t++)e[t]=p._enter(n,i,!1,o[t]);return new l.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,o)){const e=[];let t=!1;for(let r=0,s=o.length;r<s;r++)if(e[r]=this._runAutoIndentType(n,i,o[r],a),!e[r]){t=!0;break}if(!t)return new l.Tp(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,o,s,a))return this._runAutoClosingOvertype(t,n,i,o,a);if(!e){const e=this._getAutoClosingPairClose(n,i,o,a,!1);if(e)return this._runAutoClosingOpenCharType(t,n,i,o,a,!1,e)}if(!e&&this._isSurroundSelectionType(n,i,o,a))return this._runSurroundSelectionType(t,n,i,o,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,o)){const e=this._typeInterceptorElectricChar(t,n,i,o[0],a);if(e)return e}const u=[];for(let l=0,h=o.length;l<h;l++)u[l]=new r.T4(o[l],a);const c=L(a,t);return new l.Tp(c,u,{shouldPushStackElementBefore:v(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,o){const s=[];for(let l=0,u=i.length;l<u;l++)s[l]=new r.T4(i[l],o);const a=L(o,e);return new l.Tp(a,s,{shouldPushStackElementBefore:v(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(null===t||null===n)return[];const i=[];for(let o=0,s=n.length;o<s;o++){let s=n[o].positionLineNumber;if(1===s)i[o]=new r.Sj(new c.e(1,1,1,1),"\n");else{s--;const n=t.getLineMaxColumn(s);i[o]=this._enter(e,t,!1,new c.e(s,n,s,n))}}return i}static lineInsertAfter(e,t,n){if(null===t||null===n)return[];const i=[];for(let o=0,r=n.length;o<r;o++){const r=n[o].positionLineNumber,s=t.getLineMaxColumn(r);i[o]=this._enter(e,t,!1,new c.e(r,s,r,s))}return i}static lineBreakInsert(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=this._enter(e,t,!0,n[o]);return i}}class S extends r.Uo{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range;return this.closeCharacterRange=new c.e(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new c.e(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}class w{constructor(e,t,n,i,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}function L(e,t){return" "===e?5===t||6===t?6:5:4}function v(e,t){return!(!N(e)||N(t))||5!==e&&b(e)!==b(t)}function b(e){return 6===e||5===e?"space":e}function N(e){return 4===e||5===e||6===e}},55017:(e,t,n)=>{n.d(t,{L:()=>c,w:()=>u});var i=n(65288),o=n(22514),r=n(49515),s=n(92189),a=n(8655),l=n(81524);class u{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let o=n.column-2;o>=0;o--){const n=e.charCodeAt(o),r=t.get(n);if(0===r){if(2===i)return this._createWord(e,i,r,o+1,this._findEndOfWord(e,t,i,o+1));i=1}else if(2===r){if(1===i)return this._createWord(e,i,r,o+1,this._findEndOfWord(e,t,i,o+1));i=2}else if(1===r&&0!==i)return this._createWord(e,i,r,o+1,this._findEndOfWord(e,t,i,o+1))}return 0!==i?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const o=e.length;for(let r=i;r<o;r++){const i=e.charCodeAt(r),o=t.get(i);if(1===o)return r;if(1===n&&2===o)return r;if(2===n&&0===o)return r}return o}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const o=e.length;for(let r=n.column-1;r<o;r++){const n=e.charCodeAt(r),o=t.get(n);if(0===o){if(2===i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(2===o){if(1===i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(1===o&&0!==i)return this._createWord(e,i,o,this._findStartOfWord(e,t,i,r-1),r)}return 0!==i?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){for(let o=i;o>=0;o--){const i=e.charCodeAt(o),r=t.get(i);if(1===r)return o+1;if(1===n&&2===r)return o+1;if(2===n&&0===r)return o+1}return 0}static moveWordLeft(e,t,n,i){let o=n.lineNumber,r=n.column;1===r&&o>1&&(o-=1,r=t.getLineMaxColumn(o));let s=u._findPreviousWordOnLine(e,t,new a.L(o,r));if(0===i)return new a.L(o,s?s.start+1:1);if(1===i)return s&&2===s.wordType&&s.end-s.start===1&&0===s.nextCharClass&&(s=u._findPreviousWordOnLine(e,t,new a.L(o,s.start+1))),new a.L(o,s?s.start+1:1);if(3===i){while(s&&2===s.wordType)s=u._findPreviousWordOnLine(e,t,new a.L(o,s.start+1));return new a.L(o,s?s.start+1:1)}return s&&r<=s.end+1&&(s=u._findPreviousWordOnLine(e,t,new a.L(o,s.start+1))),new a.L(o,s?s.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,o=e.getLineMaxColumn(n);if(1===t.column)return n>1?new a.L(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let s=t.column-1;s>1;s--){const e=r.charCodeAt(s-2),t=r.charCodeAt(s-1);if(95===e&&95!==t)return new a.L(n,s);if(45===e&&45!==t)return new a.L(n,s);if((i.mK(e)||i.T5(e))&&i.df(t))return new a.L(n,s);if(i.df(e)&&i.df(t)&&s+1<o){const e=r.charCodeAt(s);if(i.mK(e)||i.T5(e))return new a.L(n,s)}}return new a.L(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,r=n.column,s=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(s=!0,o+=1,r=1);let l=u._findNextWordOnLine(e,t,new a.L(o,r));if(2===i)l&&2===l.wordType&&l.end-l.start===1&&0===l.nextCharClass&&(l=u._findNextWordOnLine(e,t,new a.L(o,l.end+1))),r=l?l.end+1:t.getLineMaxColumn(o);else if(3===i){s&&(r=0);while(l&&(2===l.wordType||l.start+1<=r))l=u._findNextWordOnLine(e,t,new a.L(o,l.end+1));r=l?l.start+1:t.getLineMaxColumn(o)}else l&&!s&&r>=l.start+1&&(l=u._findNextWordOnLine(e,t,new a.L(o,l.end+1))),r=l?l.start+1:t.getLineMaxColumn(o);return new a.L(o,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,o=e.getLineMaxColumn(n);if(t.column===o)return n<e.getLineCount()?new a.L(n+1,1):t;const r=e.getLineContent(n);for(let s=t.column+1;s<o;s++){const e=r.charCodeAt(s-2),t=r.charCodeAt(s-1);if(95!==e&&95===t)return new a.L(n,s);if(45!==e&&45===t)return new a.L(n,s);if((i.mK(e)||i.T5(e))&&i.df(t))return new a.L(n,s);if(i.df(e)&&i.df(t)&&s+1<o){const e=r.charCodeAt(s);if(i.mK(e)||i.T5(e))return new a.L(n,s)}}return new a.L(n,o)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),o=t.column-2,r=i.ow(n,o);return r+1<o?new l.e(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(r.A.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new l.e(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const c=new a.L(o.positionLineNumber,o.positionColumn);let h=c.lineNumber,d=c.column;if(1===h&&1===d)return null;if(s){const e=this._deleteWordLeftWhitespace(i,c);if(e)return e}let m=u._findPreviousWordOnLine(n,i,c);return 0===t?m?d=m.start+1:d>1?d=1:(h--,d=i.getLineMaxColumn(h)):(m&&d<=m.end+1&&(m=u._findPreviousWordOnLine(n,i,new a.L(h,m.start+1))),m?d=m.end+1:d>1?d=1:(h--,d=i.getLineMaxColumn(h))),new l.e(h,d,c.lineNumber,c.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new a.L(n.positionLineNumber,n.positionColumn),o=this._deleteInsideWordWhitespace(t,i);return o||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return 32===n||9===n}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(0===i)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;while(o>0&&this._charAtIsWhitespace(n,o-1))o--;while(r+1<i&&this._charAtIsWhitespace(n,r+1))r++;return new l.e(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),o=i.length;if(0===o)return n.lineNumber>1?new l.e(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new l.e(n.lineNumber,1,n.lineNumber+1,1):new l.e(n.lineNumber,1,n.lineNumber,1);const r=e=>e.start+1<=n.column&&n.column<=e.end+1,s=(e,t)=>(e=Math.min(e,n.column),t=Math.max(t,n.column),new l.e(n.lineNumber,e,n.lineNumber,t)),a=e=>{let t=e.start+1,n=e.end+1,r=!1;while(n-1<o&&this._charAtIsWhitespace(i,n-1))r=!0,n++;if(!r)while(t>1&&this._charAtIsWhitespace(i,t-2))t--;return s(t,n)},c=u._findPreviousWordOnLine(e,t,n);if(c&&r(c))return a(c);const h=u._findNextWordOnLine(e,t,n);return h&&r(h)?a(h):c&&h?s(c.end+1,h.start+1):c?s(c.start+1,c.end+1):h?s(h.start+1,h.end+1):s(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=u._moveWordPartLeft(e,n);return new l.e(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const t=e.charAt(i);if(" "!==t&&"\t"!==t)return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new l.e(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const s=new a.L(o.positionLineNumber,o.positionColumn);let c=s.lineNumber,h=s.column;const d=i.getLineCount(),m=i.getLineMaxColumn(c);if(c===d&&h===m)return null;if(r){const e=this._deleteWordRightWhitespace(i,s);if(e)return e}let g=u._findNextWordOnLine(n,i,s);return 2===t?g?h=g.end+1:h<m||c===d?h=m:(c++,g=u._findNextWordOnLine(n,i,new a.L(c,1)),h=g?g.start+1:i.getLineMaxColumn(c)):(g&&h>=g.start+1&&(g=u._findNextWordOnLine(n,i,new a.L(c,g.end+1))),g?h=g.start+1:h<m||c===d?h=m:(c++,g=u._findNextWordOnLine(n,i,new a.L(c,1)),h=g?g.start+1:i.getLineMaxColumn(c))),new l.e(c,h,s.lineNumber,s.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=u._moveWordPartRight(e,n);return new l.e(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new l.e(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=(0,s.u)(t),o=u._findPreviousWordOnLine(i,e,n);if(o&&1===o.wordType&&o.start<=n.column-1&&n.column-1<=o.end)return u._createWordAtPosition(e,n.lineNumber,o);const r=u._findNextWordOnLine(i,e,n);return r&&1===r.wordType&&r.start<=n.column-1&&n.column-1<=r.end?u._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,r){const c=(0,s.u)(e.wordSeparators),h=u._findPreviousWordOnLine(c,t,r),d=u._findNextWordOnLine(c,t,r);if(!i){let e,n;return h&&1===h.wordType&&h.start<=r.column-1&&r.column-1<=h.end?(e=h.start+1,n=h.end+1):d&&1===d.wordType&&d.start<=r.column-1&&r.column-1<=d.end?(e=d.start+1,n=d.end+1):(e=h?h.end+1:1,n=d?d.start+1:t.getLineMaxColumn(r.lineNumber)),new o.rS(new l.e(r.lineNumber,e,r.lineNumber,n),1,0,new a.L(r.lineNumber,n),0)}let m,g;h&&1===h.wordType&&h.start<r.column-1&&r.column-1<h.end?(m=h.start+1,g=h.end+1):d&&1===d.wordType&&d.start<r.column-1&&r.column-1<d.end?(m=d.start+1,g=d.end+1):(m=r.column,g=r.column);const f=r.lineNumber;let C;if(n.selectionStart.containsPosition(r))C=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){C=m;const e=new a.L(f,C);n.selectionStart.containsPosition(e)&&(C=n.selectionStart.endColumn)}else{C=g;const e=new a.L(f,C);n.selectionStart.containsPosition(e)&&(C=n.selectionStart.startColumn)}return n.move(!0,f,C,0)}}class c extends u{static deleteWordPartLeft(e){const t=h([u.deleteWordLeft(e,0),u.deleteWordLeft(e,2),u._deleteWordPartLeft(e.model,e.selection)]);return t.sort(l.e.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=h([u.deleteWordRight(e,0),u.deleteWordRight(e,2),u._deleteWordPartRight(e.model,e.selection)]);return t.sort(l.e.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=h([u.moveWordLeft(e,t,n,0),u.moveWordLeft(e,t,n,2),u._moveWordPartLeft(t,n)]);return i.sort(a.L.compare),i[2]}static moveWordPartRight(e,t,n){const i=h([u.moveWordRight(e,t,n,0),u.moveWordRight(e,t,n,2),u._moveWordPartRight(t,n)]);return i.sort(a.L.compare),i[0]}}function h(e){return e.filter((e=>Boolean(e)))}},22514:(e,t,n)=>{n.d(t,{LM:()=>d,LN:()=>S,Tp:()=>p,Vi:()=>m,rS:()=>C});var i=n(8655),o=n(81524),r=n(49948),s=n(49465),a=n(10824),l=n(38184);const u=()=>!0,c=()=>!1,h=e=>" "===e||"\t"===e;class d{static shouldRecreate(e){return e.hasChanged(142)||e.hasChanged(128)||e.hasChanged(36)||e.hasChanged(75)||e.hasChanged(77)||e.hasChanged(78)||e.hasChanged(6)||e.hasChanged(10)||e.hasChanged(8)||e.hasChanged(9)||e.hasChanged(13)||e.hasChanged(126)||e.hasChanged(49)||e.hasChanged(89)}constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=n.options,r=o.get(142),s=o.get(49);this.readOnly=o.get(89),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(114),this.lineHeight=s.lineHeight,this.typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(126),this.wordSeparators=o.get(128),this.emptySelectionClipboard=o.get(36),this.copyWithSyntaxHighlighting=o.get(24),this.multiCursorMergeOverlapping=o.get(75),this.multiCursorPaste=o.get(77),this.multiCursorLimit=o.get(78),this.autoClosingBrackets=o.get(6),this.autoClosingQuotes=o.get(10),this.autoClosingDelete=o.get(8),this.autoClosingOvertype=o.get(9),this.autoSurround=o.get(13),this.autoIndent=o.get(11),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const l of a)this.surroundingPairs[l.open]=l.close}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(t)for(const e of t)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=(0,s.wH)(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return(0,l.x)(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return h;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return u;case"never":return c}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==n.indexOf(e)}visibleColumnFromColumn(e,t){return a.i.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=a.i.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(i<o)return o;const r=e.getLineMaxColumn(t);return i>r?r:i}}class m{static fromModelState(e){return new g(e)}static fromViewState(e){return new f(e)}static fromModelSelection(e){const t=r.Y.liftSelection(e),n=new C(o.e.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return m.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class g{constructor(e){this.modelState=e,this.viewState=null}}class f{constructor(e){this.modelState=null,this.viewState=e}}class C{constructor(e,t,n,i,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=C._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new C(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new i.L(t,n),r):new C(new o.e(t,n,t,n),0,r,new i.L(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?r.Y.fromPositions(e.getStartPosition(),t):r.Y.fromPositions(e.getEndPosition(),t)}}class p{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function S(e){return"'"===e||'"'===e||"`"===e}},50619:(e,t,n)=>{n.d(t,{Qy:()=>a,f0:()=>r,hZ:()=>o,iy:()=>s,y0:()=>l});var i=n(42748);class o{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class r{static inverse(e,t,n){const o=[];let s=1,a=1;for(const u of e){const e=new r(new i.z(s,u.originalRange.startLineNumber),new i.z(a,u.modifiedRange.startLineNumber),void 0);e.modifiedRange.isEmpty||o.push(e),s=u.originalRange.endLineNumberExclusive,a=u.modifiedRange.endLineNumberExclusive}const l=new r(new i.z(s,t+1),new i.z(a,n+1),void 0);return l.modifiedRange.isEmpty||o.push(l),o}constructor(e,t,n){this.originalRange=e,this.modifiedRange=t,this.innerChanges=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}get changedLineCount(){return Math.max(this.originalRange.length,this.modifiedRange.length)}flip(){var e;return new r(this.modifiedRange,this.originalRange,null===(e=this.innerChanges)||void 0===e?void 0:e.map((e=>e.flip())))}}class s{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new s(this.modifiedRange,this.originalRange)}}class a{constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new a(this.modified,this.original)}}class l{constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new l(this.lineRangeMapping.flip(),this.changes.map((e=>e.flip())))}}},76015:(e,t,n)=>{n.d(t,{V:()=>b});var i=n(64748),o=n(50619),r=n(65288),s=n(81524),a=n(19427),l=n(42748);const u=3;class c{computeDiff(e,t,n){var i;const r=new p(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}),u=r.computeDiff(),c=[];let h=null;for(const a of u.changes){let e,t;e=0===a.originalEndLineNumber?new l.z(a.originalStartLineNumber+1,a.originalStartLineNumber+1):new l.z(a.originalStartLineNumber,a.originalEndLineNumber+1),t=0===a.modifiedEndLineNumber?new l.z(a.modifiedStartLineNumber+1,a.modifiedStartLineNumber+1):new l.z(a.modifiedStartLineNumber,a.modifiedEndLineNumber+1);let n=new o.f0(e,t,null===(i=a.charChanges)||void 0===i?void 0:i.map((e=>new o.iy(new s.e(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new s.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)))));h&&(h.modifiedRange.endLineNumberExclusive!==n.modifiedRange.startLineNumber&&h.originalRange.endLineNumberExclusive!==n.originalRange.startLineNumber||(n=new o.f0(h.originalRange.join(n.originalRange),h.modifiedRange.join(n.modifiedRange),h.innerChanges&&n.innerChanges?h.innerChanges.concat(n.innerChanges):void 0),c.pop())),c.push(n),h=n}return(0,a.eZ)((()=>(0,a.DM)(c,((e,t)=>t.originalRange.startLineNumber-e.originalRange.endLineNumberExclusive===t.modifiedRange.startLineNumber-e.modifiedRange.endLineNumberExclusive&&e.originalRange.endLineNumberExclusive<t.originalRange.startLineNumber&&e.modifiedRange.endLineNumberExclusive<t.modifiedRange.startLineNumber)))),new o.hZ(c,[],u.quitEarly)}}function h(e,t,n,o){const r=new i.Hs(e,t,n);return r.ComputeDiff(o)}class d{constructor(e){const t=[],n=[];for(let i=0,o=e.length;i<o;i++)t[i]=S(e[i],1),n[i]=w(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],o=[],r=[];let s=0;for(let a=t;a<=n;a++){const t=this.lines[a],l=e?this._startColumns[a]:1,u=e?this._endColumns[a]:t.length+1;for(let e=l;e<u;e++)i[s]=t.charCodeAt(e-1),o[s]=a+1,r[s]=e,s++;!e&&a<n&&(i[s]=10,o[s]=a+1,r[s]=t.length+1,s++)}return new m(i,o,r)}}class m{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map(((e,t)=>(10===e?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`)).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return-1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e]?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return-1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e]?1:this._columns[e]+1)}}class g{constructor(e,t,n,i,o,r,s,a){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=s,this.modifiedEndColumn=a}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),s=t.getEndColumn(e.originalStart+e.originalLength-1),a=n.getStartLineNumber(e.modifiedStart),l=n.getStartColumn(e.modifiedStart),u=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),c=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new g(i,o,r,s,a,l,u,c)}}function f(e){if(e.length<=1)return e;const t=[e[0]];let n=t[0];for(let i=1,o=e.length;i<o;i++){const o=e[i],r=o.originalStart-(n.originalStart+n.originalLength),s=o.modifiedStart-(n.modifiedStart+n.modifiedLength),a=Math.min(r,s);a<u?(n.originalLength=o.originalStart+o.originalLength-n.originalStart,n.modifiedLength=o.modifiedStart+o.modifiedLength-n.modifiedStart):(t.push(o),n=o)}return t}class C{constructor(e,t,n,i,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=o}static createFromDiffResult(e,t,n,i,o,r,s){let a,l,u,c,d;if(0===t.originalLength?(a=n.getStartLineNumber(t.originalStart)-1,l=0):(a=n.getStartLineNumber(t.originalStart),l=n.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(u=i.getStartLineNumber(t.modifiedStart)-1,c=0):(u=i.getStartLineNumber(t.modifiedStart),c=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const r=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),a=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(r.getElements().length>0&&a.getElements().length>0){let e=h(r,a,o,!0).changes;s&&(e=f(e)),d=[];for(let t=0,n=e.length;t<n;t++)d.push(g.createFromDiffChange(e[t],r,a))}}return new C(a,l,u,c,d)}}class p{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new d(e),this.modified=new d(t),this.continueLineDiff=L(n.maxComputationTime),this.continueCharDiff=L(0===n.maxComputationTime?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=h(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let n=0,i=t.length;n<i;n++)e.push(C.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[n],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:e}}const i=[];let o=0,r=0;for(let s=-1,a=t.length;s<a;s++){const e=s+1<a?t[s+1]:null,n=e?e.originalStart:this.originalLines.length,l=e?e.modifiedStart:this.modifiedLines.length;while(o<n&&r<l){const e=this.originalLines[o],t=this.modifiedLines[r];if(e!==t){{let n=S(e,1),s=S(t,1);while(n>1&&s>1){const i=e.charCodeAt(n-2),o=t.charCodeAt(s-2);if(i!==o)break;n--,s--}(n>1||s>1)&&this._pushTrimWhitespaceCharChange(i,o+1,1,n,r+1,1,s)}{let n=w(e,1),s=w(t,1);const a=e.length+1,l=t.length+1;while(n<a&&s<l){const t=e.charCodeAt(n-1),i=e.charCodeAt(s-1);if(t!==i)break;n++,s++}(n<a||s<l)&&this._pushTrimWhitespaceCharChange(i,o+1,n,a,r+1,s,l)}}o++,r++}e&&(i.push(C.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=e.originalLength,r+=e.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,o,r,s){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,o,r,s))return;let a;this.shouldComputeCharChanges&&(a=[new g(t,n,t,i,o,r,o,s)]),e.push(new C(t,t,o,o,a))}_mergeTrimWhitespaceCharChange(e,t,n,i,o,r,s){const a=e.length;if(0===a)return!1;const l=e[a-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber===t&&l.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new g(t,n,t,i,o,r,o,s)),!0):l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===o&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new g(t,n,t,i,o,r,o,s)),!0))}}function S(e,t){const n=r.LC(e);return-1===n?t:n+1}function w(e,t){const n=r.ow(e);return-1===n?t:n+2}function L(e){if(0===e)return()=>!0;const t=Date.now();return()=>Date.now()-t<e}var v=n(74936);const b={getLegacy:()=>new c,getAdvanced:()=>new v.Uc}},74936:(e,t,n)=>{n.d(t,{Uc:()=>E,v:()=>x});var i=n(19427),o=n(42748),r=n(54032),s=n(8655),a=n(81524),l=n(746);class u{static trivial(e,t){return new u([new c(new r.q(0,e.length),new r.q(0,t.length))],!1)}static trivialTimedOut(e,t){return new u([new c(new r.q(0,e.length),new r.q(0,t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class c{constructor(e,t){this.seq1Range=e,this.seq2Range=t}reverse(){return new c(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new c(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return 0===e?this:new c(this.seq1Range.delta(e),this.seq2Range.delta(e))}}class h{isValid(){return!0}}h.instance=new h;class d{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new l.he("timeout must be positive")}isValid(){const e=Date.now()-this.startTime<this.timeout;return!e&&this.valid&&(this.valid=!1),this.valid}}class m{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}class g{compute(e,t,n=h.instance,i){if(0===e.length||0===t.length)return u.trivial(e,t);const o=new m(e.length,t.length),s=new m(e.length,t.length),a=new m(e.length,t.length);for(let r=0;r<e.length;r++)for(let l=0;l<t.length;l++){if(!n.isValid())return u.trivialTimedOut(e,t);const c=0===r?0:o.get(r-1,l),h=0===l?0:o.get(r,l-1);let d;e.getElement(r)===t.getElement(l)?(d=0===r||0===l?0:o.get(r-1,l-1),r>0&&l>0&&3===s.get(r-1,l-1)&&(d+=a.get(r-1,l-1)),d+=i?i(r,l):1):d=-1;const m=Math.max(c,h,d);if(m===d){const e=r>0&&l>0?a.get(r-1,l-1):0;a.set(r,l,e+1),s.set(r,l,3)}else m===c?(a.set(r,l,0),s.set(r,l,1)):m===h&&(a.set(r,l,0),s.set(r,l,2));o.set(r,l,m)}const l=[];let d=e.length,g=t.length;function f(e,t){e+1===d&&t+1===g||l.push(new c(new r.q(e+1,d),new r.q(t+1,g))),d=e,g=t}let C=e.length-1,p=t.length-1;while(C>=0&&p>=0)3===s.get(C,p)?(f(C,p),C--,p--):1===s.get(C,p)?C--:p--;return f(-1,-1),l.reverse(),new u(l,!1)}}function f(e,t,n){let i=n;return i=S(e,t,i),i=w(e,t,i),i}function C(e,t,n){const i=[];for(const o of n){const e=i[i.length-1];e?o.seq1Range.start-e.seq1Range.endExclusive<=2||o.seq2Range.start-e.seq2Range.endExclusive<=2?i[i.length-1]=new c(e.seq1Range.join(o.seq1Range),e.seq2Range.join(o.seq2Range)):i.push(o):i.push(o)}return i}function p(e,t,n){let i=n;if(0===i.length)return i;let o,s=0;do{o=!1;const a=[i[0]];for(let l=1;l<i.length;l++){const u=i[l],c=a[a.length-1];function h(n,i){const o=new r.q(c.seq1Range.endExclusive,u.seq1Range.start),s=e.countLinesIn(o);if(s>5||o.length>500)return!1;const a=e.getText(o).trim();if(a.length>20||a.split(/\r\n|\r|\n/).length>1)return!1;const l=e.countLinesIn(n.seq1Range),h=n.seq1Range.length,d=t.countLinesIn(n.seq2Range),m=n.seq2Range.length,g=e.countLinesIn(i.seq1Range),f=i.seq1Range.length,C=t.countLinesIn(i.seq2Range),p=i.seq2Range.length,S=130;function w(e){return Math.min(e,S)}return Math.pow(Math.pow(w(40*l+h),1.5)+Math.pow(w(40*d+m),1.5),1.5)+Math.pow(Math.pow(w(40*g+f),1.5)+Math.pow(w(40*C+p),1.5),1.5)>1.3*Math.pow(Math.pow(S,1.5),1.5)}const d=h(c,u);d?(o=!0,a[a.length-1]=a[a.length-1].join(u)):a.push(u)}i=a}while(s++<10&&o);return i}function S(e,t,n){if(0===n.length)return n;const i=[];i.push(n[0]);for(let s=1;s<n.length;s++){const o=i[i.length-1];let a=n[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const n=a.seq1Range.start-o.seq1Range.endExclusive;let s;for(s=1;s<=n;s++)if(e.getElement(a.seq1Range.start-s)!==e.getElement(a.seq1Range.endExclusive-s)||t.getElement(a.seq2Range.start-s)!==t.getElement(a.seq2Range.endExclusive-s))break;if(s--,s===n){i[i.length-1]=new c(new r.q(o.seq1Range.start,a.seq1Range.endExclusive-n),new r.q(o.seq2Range.start,a.seq2Range.endExclusive-n));continue}a=a.delta(-s)}i.push(a)}const o=[];for(let s=0;s<i.length-1;s++){const n=i[s+1];let a=i[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const o=n.seq1Range.start-a.seq1Range.endExclusive;let l;for(l=0;l<o;l++)if(e.getElement(a.seq1Range.start+l)!==e.getElement(a.seq1Range.endExclusive+l)||t.getElement(a.seq2Range.start+l)!==t.getElement(a.seq2Range.endExclusive+l))break;if(l===o){i[s+1]=new c(new r.q(a.seq1Range.start+o,n.seq1Range.endExclusive),new r.q(a.seq2Range.start+o,n.seq2Range.endExclusive));continue}l>0&&(a=a.delta(l))}o.push(a)}return i.length>0&&o.push(i[i.length-1]),o}function w(e,t,n){if(!e.getBoundaryScore||!t.getBoundaryScore)return n;for(let i=0;i<n.length;i++){const o=i>0?n[i-1]:void 0,s=n[i],a=i+1<n.length?n[i+1]:void 0,l=new r.q(o?o.seq1Range.start+1:0,a?a.seq1Range.endExclusive-1:e.length),u=new r.q(o?o.seq2Range.start+1:0,a?a.seq2Range.endExclusive-1:t.length);s.seq1Range.isEmpty?n[i]=L(s,e,t,l,u):s.seq2Range.isEmpty&&(n[i]=L(s.reverse(),t,e,u,l).reverse())}return n}function L(e,t,n,i,o){const r=100;let s=1;while(e.seq1Range.start-s>=i.start&&e.seq2Range.start-s>=o.start&&n.getElement(e.seq2Range.start-s)===n.getElement(e.seq2Range.endExclusive-s)&&s<r)s++;s--;let a=0;while(e.seq1Range.start+a<i.endExclusive&&e.seq2Range.endExclusive+a<o.endExclusive&&n.getElement(e.seq2Range.start+a)===n.getElement(e.seq2Range.endExclusive+a)&&a<r)a++;if(0===s&&0===a)return e;let l=0,u=-1;for(let c=-s;c<=a;c++){const i=e.seq2Range.start+c,o=e.seq2Range.endExclusive+c,r=e.seq1Range.start+c,s=t.getBoundaryScore(r)+n.getBoundaryScore(i)+n.getBoundaryScore(o);s>u&&(u=s,l=c)}return e.delta(l)}class v{compute(e,t,n=h.instance){if(0===e.length||0===t.length)return u.trivial(e,t);function i(n,i){while(n<e.length&&i<t.length&&e.getElement(n)===t.getElement(i))n++,i++;return n}let o=0;const s=new N;s.set(0,i(0,0));const a=new _;a.set(0,0===s.get(0)?null:new b(null,0,0,s.get(0)));let l=0;e:while(1){if(o++,!n.isValid())return u.trivialTimedOut(e,t);const r=-Math.min(o,t.length+o%2),c=Math.min(o,e.length+o%2);for(l=r;l<=c;l+=2){const n=l===c?-1:s.get(l+1),o=l===r?-1:s.get(l-1)+1,u=Math.min(Math.max(n,o),e.length),h=u-l;if(u>e.length||h>t.length)continue;const d=i(u,h);s.set(l,d);const m=u===n?a.get(l+1):a.get(l-1);if(a.set(l,d!==u?new b(m,u,h,d-u):m),s.get(l)===e.length&&s.get(l)-l===t.length)break e}}let d=a.get(l);const m=[];let g=e.length,f=t.length;while(1){const e=d?d.x+d.length:0,t=d?d.y+d.length:0;if(e===g&&t===f||m.push(new c(new r.q(e,g),new r.q(t,f))),!d)break;g=d.x,f=d.y,d=d.prev}return m.reverse(),new u(m,!1)}}class b{constructor(e,t,n,i){this.prev=e,this.x=t,this.y=n,this.length=i}}class N{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const e=this.negativeArr;this.negativeArr=new Int32Array(2*e.length),this.negativeArr.set(e)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const e=this.positiveArr;this.positiveArr=new Int32Array(2*e.length),this.positiveArr.set(e)}this.positiveArr[e]=t}}}class _{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}var P=n(50619);class E{constructor(){this.dynamicProgrammingDiffing=new g,this.myersDiffingAlgorithm=new v}computeDiff(e,t,n){if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return{changes:[new P.f0(new o.z(1,e.length+1),new o.z(1,t.length+1),[new P.iy(new a.e(1,1,e.length,e[0].length+1),new a.e(1,1,t.length,t[0].length+1))])],hitTimeout:!1,moves:[]};const s=0===n.maxComputationTimeMs?h.instance:new d(n.maxComputationTimeMs),l=!n.ignoreTrimWhitespace,u=new Map;function m(e){let t=u.get(e);return void 0===t&&(t=u.size,u.set(e,t)),t}const g=e.map((e=>m(e.trim()))),C=t.map((e=>m(e.trim()))),p=new k(g,e),S=new k(C,t),w=(()=>p.length+S.length<1500?this.dynamicProgrammingDiffing.compute(p,S,s,((n,i)=>e[n]===t[i]?0===t[i].length?.1:1+Math.log(1+t[i].length):.99)):this.myersDiffingAlgorithm.compute(p,S))();let L=w.diffs,v=w.hitTimeout;L=f(p,S,L);const b=[],N=n=>{if(l)for(let i=0;i<n;i++){const n=_+i,o=E+i;if(e[n]!==t[o]){const i=this.refineDiff(e,t,new c(new r.q(n,n+1),new r.q(o,o+1)),s,l);for(const e of i.mappings)b.push(e);i.hitTimeout&&(v=!0)}}};let _=0,E=0;for(const o of L){(0,i.eZ)((()=>o.seq1Range.start-_===o.seq2Range.start-E));const n=o.seq1Range.start-_;N(n),_=o.seq1Range.endExclusive,E=o.seq2Range.endExclusive;const r=this.refineDiff(e,t,o,s,l);r.hitTimeout&&(v=!0);for(const e of r.mappings)b.push(e)}N(e.length-_);const R=x(b,e,t),y=[];if(n.computeMoves){const n=R.filter((e=>e.modifiedRange.isEmpty&&e.originalRange.length>=3)).map((t=>new z(t.originalRange,e))),i=new Set(R.filter((e=>e.originalRange.isEmpty&&e.modifiedRange.length>=3)).map((e=>new z(e.modifiedRange,t))));for(const o of n){let n,a=-1;for(const e of i){const t=o.computeSimilarity(e);t>a&&(a=t,n=e)}if(a>.9&&n){const a=this.refineDiff(e,t,new c(new r.q(o.range.startLineNumber-1,o.range.endLineNumberExclusive-1),new r.q(n.range.startLineNumber-1,n.range.endLineNumberExclusive-1)),s,l),u=x(a.mappings,e,t,!0);i.delete(n),y.push(new P.y0(new P.Qy(o.range,n.range),u))}}}return(0,i.eZ)((()=>{function n(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;const n=t[e.lineNumber-1];return!(e.column<1||e.column>n.length+1)}function i(e,t){return!(e.startLineNumber<1||e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1||e.endLineNumberExclusive>t.length+1)}for(const o of R){if(!o.innerChanges)return!1;for(const i of o.innerChanges){const o=n(i.modifiedRange.getStartPosition(),t)&&n(i.modifiedRange.getEndPosition(),t)&&n(i.originalRange.getStartPosition(),e)&&n(i.originalRange.getEndPosition(),e);if(!o)return!1}if(!i(o.modifiedRange,t)||!i(o.originalRange,e))return!1}return!0})),new P.hZ(R,y,v)}refineDiff(e,t,n,i,o){const r=new W(e,n.seq1Range,o),s=new W(t,n.seq2Range,o),a=r.length+s.length<500?this.dynamicProgrammingDiffing.compute(r,s,i):this.myersDiffingAlgorithm.compute(r,s,i);let l=a.diffs;l=f(r,s,l),l=R(r,s,l),l=C(r,s,l),l=p(r,s,l);const u=l.map((e=>new P.iy(r.translateRange(e.seq1Range),s.translateRange(e.seq2Range))));return{mappings:u,hitTimeout:a.hitTimeout}}}function R(e,t,n){const i=[];let o;function s(){if(!o)return;const e=o.s1Range.length-o.deleted;o.s2Range.length,o.added;Math.max(o.deleted,o.added)+(o.count-1)>e&&i.push(new c(o.s1Range,o.s2Range)),o=void 0}for(const l of n){function u(e,t){var n,i,a,u;if(!o||!o.s1Range.containsRange(e)||!o.s2Range.containsRange(t))if(!o||o.s1Range.endExclusive<e.start&&o.s2Range.endExclusive<t.start)s(),o={added:0,deleted:0,count:0,s1Range:e,s2Range:t};else{const s=r.q.tryCreate(o.s1Range.endExclusive,e.start),a=r.q.tryCreate(o.s2Range.endExclusive,t.start);o.deleted+=null!==(n=null===s||void 0===s?void 0:s.length)&&void 0!==n?n:0,o.added+=null!==(i=null===a||void 0===a?void 0:a.length)&&void 0!==i?i:0,o.s1Range=o.s1Range.join(e),o.s2Range=o.s2Range.join(t)}const c=e.intersect(l.seq1Range),h=t.intersect(l.seq2Range);o.count++,o.deleted+=null!==(a=null===c||void 0===c?void 0:c.length)&&void 0!==a?a:0,o.added+=null!==(u=null===h||void 0===h?void 0:h.length)&&void 0!==u?u:0}const h=e.findWordContaining(l.seq1Range.start-1),d=t.findWordContaining(l.seq2Range.start-1),m=e.findWordContaining(l.seq1Range.endExclusive),g=t.findWordContaining(l.seq2Range.endExclusive);h&&m&&d&&g&&h.equals(m)&&d.equals(g)?u(h,d):(h&&d&&u(h,d),m&&g&&u(m,g))}s();const a=y(n,i);return a}function y(e,t){const n=[];while(e.length>0||t.length>0){const i=e[0],o=t[0];let r;r=i&&(!o||i.seq1Range.start<o.seq1Range.start)?e.shift():t.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=r.seq1Range.start?n[n.length-1]=n[n.length-1].join(r):n.push(r)}return n}function x(e,t,n,o=!1){const r=[];for(const i of V(e.map((e=>T(e,t,n))),((e,t)=>e.originalRange.overlapOrTouch(t.originalRange)||e.modifiedRange.overlapOrTouch(t.modifiedRange)))){const e=i[0],t=i[i.length-1];r.push(new P.f0(e.originalRange.join(t.originalRange),e.modifiedRange.join(t.modifiedRange),i.map((e=>e.innerChanges[0]))))}return(0,i.eZ)((()=>!(!o&&r.length>0&&r[0].originalRange.startLineNumber!==r[0].modifiedRange.startLineNumber)&&(0,i.DM)(r,((e,t)=>t.originalRange.startLineNumber-e.originalRange.endLineNumberExclusive===t.modifiedRange.startLineNumber-e.modifiedRange.endLineNumberExclusive&&e.originalRange.endLineNumberExclusive<t.originalRange.startLineNumber&&e.modifiedRange.endLineNumberExclusive<t.modifiedRange.startLineNumber)))),r}function T(e,t,n){let i=0,r=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+i<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+i<=e.modifiedRange.endLineNumber&&(r=-1),e.modifiedRange.startColumn-1>=n[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+r&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+r&&(i=1);const s=new o.z(e.originalRange.startLineNumber+i,e.originalRange.endLineNumber+1+r),a=new o.z(e.modifiedRange.startLineNumber+i,e.modifiedRange.endLineNumber+1+r);return new P.f0(s,a,[e])}function*V(e,t){let n,i;for(const o of e)void 0!==i&&t(i,o)?n.push(o):(n&&(yield n),n=[o]),i=o;n&&(yield n)}class k{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=0===e?0:M(this.lines[e-1]),n=e===this.lines.length?0:M(this.lines[e]);return 1e3-(t+n)}}function M(e){let t=0;while(t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t)))t++;return t}class W{constructor(e,t,n){this.lines=e,this.considerWhitespaceChanges=n,this.elements=[],this.firstCharOffsetByLineMinusOne=[],this.offsetByLine=[];let i=!1;t.start>0&&t.endExclusive>=e.length&&(t=new r.q(t.start-1,t.endExclusive),i=!0),this.lineRange=t;for(let o=this.lineRange.start;o<this.lineRange.endExclusive;o++){let t=e[o],r=0;if(i)r=t.length,t="",i=!1;else if(!n){const e=t.trimStart();r=t.length-e.length,t=e.trimEnd()}this.offsetByLine.push(r);for(let e=0;e<t.length;e++)this.elements.push(t.charCodeAt(e));o<e.length-1&&(this.elements.push("\n".charCodeAt(0)),this.firstCharOffsetByLineMinusOne[o-this.lineRange.start]=this.elements.length)}this.offsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new r.q(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map((e=>String.fromCharCode(e))).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=D(e>0?this.elements[e-1]:-1),n=D(e<this.elements.length?this.elements[e]:-1);if(6===t&&7===n)return 0;let i=0;return t!==n&&(i+=10,1===n&&(i+=1)),i+=O(t),i+=O(n),i}translateOffset(e){if(this.lineRange.isEmpty)return new s.L(this.lineRange.start+1,1);let t=0,n=this.firstCharOffsetByLineMinusOne.length;while(t<n){const i=Math.floor((t+n)/2);this.firstCharOffsetByLineMinusOne[i]>e?n=i:t=i+1}const i=0===t?0:this.firstCharOffsetByLineMinusOne[t-1];return new s.L(this.lineRange.start+t+1,e-i+1+this.offsetByLine[t])}translateRange(e){return a.e.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length)return;if(!A(this.elements[e]))return;let t=e;while(t>0&&A(this.elements[t-1]))t--;let n=e;while(n<this.elements.length&&A(this.elements[n]))n++;return new r.q(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}}function A(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}const I={[0]:0,[1]:0,[2]:0,[3]:10,[4]:2,[5]:3,[6]:10,[7]:10};function O(e){return I[e]}function D(e){return 10===e?7:13===e?6:q(e)?5:e>=97&&e<=122?0:e>=65&&e<=90?1:e>=48&&e<=57?2:-1===e?3:4}function q(e){return 32===e||9===e}const B=new Map;function F(e){let t=B.get(e);return void 0===t&&(t=B.size,B.set(e,t)),t}class z{constructor(e,t){this.range=e,this.lines=t,this.histogram=[];let n=0;for(let i=e.startLineNumber-1;i<e.endLineNumberExclusive-1;i++){const e=t[i];for(let t=0;t<e.length;t++){n++;const i=e[t],o=F(i);this.histogram[o]=(this.histogram[o]||0)+1}n++;const o=F("\n");this.histogram[o]=(this.histogram[o]||0)+1}this.totalCount=n}computeSimilarity(e){var t,n;let i=0;const o=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<o;r++)i+=Math.abs((null!==(t=this.histogram[r])&&void 0!==t?t:0)-(null!==(n=e.histogram[r])&&void 0!==n?n:0));return 1-i/(this.totalCount+e.totalCount)}}},40129:(e,t,n)=>{n.d(t,{p:()=>i});class i{constructor(e,t,n,i,o,r){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=o,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}},90290:(e,t,n)=>{n.d(t,{g:()=>i});const i={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},90694:(e,t,n)=>{n.d(t,{u:()=>i});var i,o=n(76601),r=n(25065);(function(e){e.editorSimpleInput=new r.uy("editorSimpleInput",!1,!0),e.editorTextFocus=new r.uy("editorTextFocus",!1,o.NC("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),e.focus=new r.uy("editorFocus",!1,o.NC("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new r.uy("textInputFocus",!1,o.NC("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new r.uy("editorReadonly",!1,o.NC("editorReadonly","Whether the editor is read-only")),e.inDiffEditor=new r.uy("inDiffEditor",!1,o.NC("inDiffEditor","Whether the context is a diff editor")),e.isEmbeddedDiffEditor=new r.uy("isEmbeddedDiffEditor",!1,o.NC("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),e.accessibleDiffViewerVisible=new r.uy("accessibleDiffViewerVisible",!1,o.NC("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),e.columnSelection=new r.uy("editorColumnSelection",!1,o.NC("editorColumnSelection","Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new r.uy("editorHasSelection",!1,o.NC("editorHasSelection","Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new r.uy("editorHasMultipleSelections",!1,o.NC("editorHasMultipleSelections","Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new r.uy("editorTabMovesFocus",!1,o.NC("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInWalkThroughSnippet=new r.uy("isInEmbeddedEditor",!1,!0),e.canUndo=new r.uy("canUndo",!1,!0),e.canRedo=new r.uy("canRedo",!1,!0),e.hoverVisible=new r.uy("editorHoverVisible",!1,o.NC("editorHoverVisible","Whether the editor hover is visible")),e.hoverFocused=new r.uy("editorHoverFocused",!1,o.NC("editorHoverFocused","Whether the editor hover is focused")),e.stickyScrollFocused=new r.uy("stickyScrollFocused",!1,o.NC("stickyScrollFocused","Whether the sticky scroll is focused")),e.stickyScrollVisible=new r.uy("stickyScrollVisible",!1,o.NC("stickyScrollVisible","Whether the sticky scroll is visible")),e.standaloneColorPickerVisible=new r.uy("standaloneColorPickerVisible",!1,o.NC("standaloneColorPickerVisible","Whether the standalone color picker is visible")),e.standaloneColorPickerFocused=new r.uy("standaloneColorPickerFocused",!1,o.NC("standaloneColorPickerFocused","Whether the standalone color picker is focused")),e.inCompositeEditor=new r.uy("inCompositeEditor",void 0,o.NC("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new r.uy("editorLangId","",o.NC("editorLangId","The language identifier of the editor")),e.hasCompletionItemProvider=new r.uy("editorHasCompletionItemProvider",!1,o.NC("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new r.uy("editorHasCodeActionsProvider",!1,o.NC("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),e.hasCodeLensProvider=new r.uy("editorHasCodeLensProvider",!1,o.NC("editorHasCodeLensProvider","Whether the editor has a code lens provider")),e.hasDefinitionProvider=new r.uy("editorHasDefinitionProvider",!1,o.NC("editorHasDefinitionProvider","Whether the editor has a definition provider")),e.hasDeclarationProvider=new r.uy("editorHasDeclarationProvider",!1,o.NC("editorHasDeclarationProvider","Whether the editor has a declaration provider")),e.hasImplementationProvider=new r.uy("editorHasImplementationProvider",!1,o.NC("editorHasImplementationProvider","Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new r.uy("editorHasTypeDefinitionProvider",!1,o.NC("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),e.hasHoverProvider=new r.uy("editorHasHoverProvider",!1,o.NC("editorHasHoverProvider","Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new r.uy("editorHasDocumentHighlightProvider",!1,o.NC("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new r.uy("editorHasDocumentSymbolProvider",!1,o.NC("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),e.hasReferenceProvider=new r.uy("editorHasReferenceProvider",!1,o.NC("editorHasReferenceProvider","Whether the editor has a reference provider")),e.hasRenameProvider=new r.uy("editorHasRenameProvider",!1,o.NC("editorHasRenameProvider","Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new r.uy("editorHasSignatureHelpProvider",!1,o.NC("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new r.uy("editorHasInlayHintsProvider",!1,o.NC("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new r.uy("editorHasDocumentFormattingProvider",!1,o.NC("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new r.uy("editorHasDocumentSelectionFormattingProvider",!1,o.NC("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new r.uy("editorHasMultipleDocumentFormattingProvider",!1,o.NC("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new r.uy("editorHasMultipleDocumentSelectionFormattingProvider",!1,o.NC("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(i||(i={}))},12805:(e,t,n)=>{n.d(t,{n:()=>r,y:()=>o});const i=[];function o(e){i.push(e)}function r(){return i.slice(0)}},61606:(e,t,n)=>{n.d(t,{b:()=>i});class i{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}}}]);